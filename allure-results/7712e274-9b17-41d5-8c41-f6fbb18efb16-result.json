{"name": "test_sorting_by_price", "status": "failed", "statusDetails": {"message": "Failed: No sort option produced ascending prices.\nTried candidates: ['Sort items by... Name (A to Z) Name (Z to A) Price (low to high) Price (high to low) Sort items by... Name (A to Z) Name (Z to A) Price (low to high) Price (high to low) Sort items by... Name (A to Z) Name (Z to A) Price (low to high) Price (high to low)', 'Price (low to high) Price (low to high) Price (low to high)', 'Price (high to low) Price (high to low) Price (high to low)', 'Sort items by... Name (A to Z) Name (Z to A) Price (low to high) Price (high to low)', 'Price (low to high)', 'Price (high to low)', 'Sort items by...', 'PRODUCTS', '© 2019 Sauce Labs. All Rights Reserved.', 'Terms of Service | Privacy Policy', '\\uf099', '\\uf09a', '\\uf0d5', '\\uf0e1']\nLast prices observed: [15.99, 7.99, 49.99, 15.99, 9.99, 29.99]\nPage-source start:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?><AppiumAUT><XCUIElementTypeApplication type=\"XCUIElementTypeApplication\" name=\"Swag Labs Mobile App\" label=\"Swag Labs Mobile App\" enabled=\"true\" visible=\"true\" accessible=\"false\" x=\"0\" y=\"0\" width=\"375\" height=\"812\" index=\"0\" traits=\"\">\n  <XCUIElementTypeWindow type=\"XCUIElementTypeWindow\" enabled=\"true\" visible=\"true\" accessible=\"false\" x=\"0\" y=\"0\" width=\"375\" height=\"812\" index=\"0\" traits=\"\">\n    <XCUIElementTypeOther type=\"XCUIElementTypeOther\" enabled=\"true\" visible=\"false\" accessible=\"false\" x=\"0\" y=\"0\" width=\"375\" height=\"812\" index=\"0\" traits=\"\">\n      <XCUIElementTypeOther type=\"XCUIElementTypeOther\" name=\"Username Password LOGIN The currently accepted usernames for this application are:\n\nstandard_user\nlocked_out_user\nproblem_user And the password for all users is:\n\nsecret_sauce Vertical scroll bar, 2 pages Horizontal scroll bar, 1 page PRODUCTS Test.allTheThings() T-Shirt (Red) $15.99 ADD TO CART Sauce Labs Onesie $7.99 ADD TO CART Sauce Labs Fleece Jacket $49.99 ADD TO CART Sauce Labs Bolt T-Shirt $15.99 ADD TO CART Sauce Labs Bike Light $9.99 ADD TO CART Sauce Labs Backpack $29.99 ADD TO CART Vertical scroll bar, 1 page Horizontal scroll bar, 1 page     © 2019 Sauce Labs. All Rights Reserved. Terms of Service | Privacy Policy Vertical scroll bar, 3 pages Horizontal scroll bar, 1 page ALL ITEMS WEBVIEW ABOUT LOGOUT RESET APP STATE\" label=\"Username Password LOGIN The currently accepted usernames for this application are:\n\nstandard_user\nlocked_out_user\nproblem_user And the password for all users is:\n\nsecret_sauce Vertical scroll bar, 2 pages Horizontal scroll bar, 1 page PRODUCTS Test.allTheThings() T-Shirt (Red) $15.99 ADD TO CART Sauce Labs Onesie $7.99 ADD TO CART Sauce Labs Fleece Jacket $49.99 ADD TO CART Sauce Labs Bolt T-Shirt $15.99 ADD TO CART Sauce Labs Bike Light $9.99 ADD TO CART Sauce Labs Backpack $29.99 ADD TO CART Vertical scroll bar, 1 page Horizontal scroll bar, 1 page     © 2019 Sauce Labs. All Rights Reserved. Terms of Service | Privacy Policy Vertical scroll bar, 3 pages Horizontal scroll bar, 1 page ALL ITEMS WEBVIEW ABOUT LOGOUT RESET APP STATE\" enabled=\"true\" visible=\"false\" accessible=\"false\" x=\"0\" y=\"0\" width=\"375\" height=\"812\" index=\"0\" traits=\"\">\n        <XCUIElementTypeOther type=\"XCUIElementTypeOther\" name=\"Username Password LOGIN The currently accepted usernames for this application are:\n\nstandard_user\nlocked_out_user\nproblem_user And the password for all users is:\n\nsecret_sauce Vertical scroll bar, 2 pages Horizontal scroll bar, 1 page PRODUCTS Test.allTheThings() T-Shirt (Red) $15.99 ADD TO CART Sauce Labs Onesie $7.99 ADD TO CART Sauce Labs Fleece Jacket $49.99 ADD TO CART Sauce Labs Bolt T-Shirt $15.99 ADD TO CART Sauce Labs Bike Light $9.99 ADD TO CART Sauce Labs Backpack $29.99 ADD TO CART Vertical scroll bar, 1 page Horizontal scroll bar, 1 page     © 2019 Sauce Labs. All Rights Reserved. Terms of Service | Privacy Policy Vertical scroll bar, 3 pages H", "trace": "driver = <appium.webdriver.webdriver.WebDriver (session=\"01996559897d2da302379f463b986402f4bb70a8\")>\n\n    def test_sorting_by_price(driver):\n        login(driver)\n        pp = ProductsPage(driver)\n        pp.wait_for_products()\n    \n        if not _open_sort_control(driver):\n            pytest.skip(\"Could not open sort control on this build\")\n    \n        # 1) try to find nodes whose text likely matches price-low-high using regex across many attributes\n        nodes = []\n        tried_texts = []\n        try:\n            all_nodes = driver.find_elements(AppiumBy.XPATH, \"//*\")\n            for n in all_nodes:\n                try:\n                    txts = [\n                        (n.text or \"\").strip(),\n                        (n.get_attribute(\"label\") or \"\").strip(),\n                        (n.get_attribute(\"name\") or \"\").strip(),\n                        (n.get_attribute(\"value\") or \"\").strip()\n                    ]\n                except Exception:\n                    txts = [\"\"]\n                combined = \" \".join([t for t in txts if t])\n                if combined and _match_text_any(combined):\n                    nodes.append((n, combined))\n        except Exception:\n            nodes = []\n    \n        print(f\"[DEBUG] Initial matching nodes: {[t for (_, t) in nodes]}\")\n    \n        # 2) explicit safe list of likely visible option strings (try to click elements whose text exactly matches these)\n        explicit_strings = [\n            \"Price (low to high)\",\n            \"Price (high to low)\",\n            \"Low to High\",\n            \"Low to high\",\n            \"price (low to high)\",\n            \"price (high to low)\",\n            \"Price (Lowest to Highest)\",\n            \"Price (Lowest To Highest)\",\n        ]\n    \n        # search for explicit strings in any node attributes\n        for s in explicit_strings:\n            try:\n                # ios predicate that checks label/name/value contains the exact string (case-insensitive)\n                pred = f\"label CONTAINS '{s}' OR name CONTAINS '{s}' OR value CONTAINS '{s}'\"\n                found = driver.find_elements(AppiumBy.IOS_PREDICATE, pred)\n                for el in found:\n                    txt = (el.text or el.get_attribute(\"label\") or el.get_attribute(\"name\") or el.get_attribute(\"value\") or \"\").strip()\n                    nodes.append((el, txt))\n            except Exception:\n                pass\n    \n        # dedupe by text\n        uniq = []\n        seen = set()\n        for el, txt in nodes:\n            key = (txt or \"<no-text>\").strip()\n            if key in seen:\n                continue\n            seen.add(key)\n            uniq.append((el, txt))\n    \n        # Attempt each candidate, re-opening modal between tries\n        last_prices = []\n        success = False\n        for el, txt in uniq:\n            tried_texts.append(txt or \"<no-text>\")\n            ok = _click_with_fallback(driver, el)\n            if not ok:\n                # try re-open once and skip\n                _open_sort_control(driver)\n                time.sleep(0.4)\n                continue\n            time.sleep(1.2)\n            prices = _collect_prices_after_sort(driver)\n            last_prices = prices[:]\n            print(f\"[DEBUG] After clicking candidate '{txt}' prices: {prices}\")\n            if prices and prices == sorted(prices):\n                success = True\n                break\n            # re-open modal and continue trying\n            _open_sort_control(driver)\n            time.sleep(0.5)\n    \n        # Final fallback: try clicking the 2nd/3rd/4th static texts if no candidate matched\n        if not success:\n            try:\n                statics = driver.find_elements(AppiumBy.XPATH, \"//XCUIElementTypeStaticText\")\n                for idx, s in enumerate(statics[:8]):\n                    txt = (s.text or s.get_attribute(\"label\") or s.get_attribute(\"name\") or \"\").strip()\n                    tried_texts.append(txt or f\"<static-{idx}>\")\n                    if _click_with_fallback(driver, s):\n                        time.sleep(1.0)\n                        prices = _collect_prices_after_sort(driver)\n                        last_prices = prices[:]\n                        print(f\"[DEBUG] After clicking static '{txt}' prices: {prices}\")\n                        if prices and prices == sorted(prices):\n                            success = True\n                            break\n                        _open_sort_control(driver)\n                        time.sleep(0.4)\n            except Exception:\n                pass\n    \n        if not success:\n            src = (driver.page_source or \"\")[:3000]\n>           pytest.fail(\n                \"No sort option produced ascending prices.\\n\"\n                f\"Tried candidates: {tried_texts}\\n\"\n                f\"Last prices observed: {last_prices}\\n\"\n                \"Page-source start:\\n\" + src\n            )\nE           Failed: No sort option produced ascending prices.\nE           Tried candidates: ['Sort items by... Name (A to Z) Name (Z to A) Price (low to high) Price (high to low) Sort items by... Name (A to Z) Name (Z to A) Price (low to high) Price (high to low) Sort items by... Name (A to Z) Name (Z to A) Price (low to high) Price (high to low)', 'Price (low to high) Price (low to high) Price (low to high)', 'Price (high to low) Price (high to low) Price (high to low)', 'Sort items by... Name (A to Z) Name (Z to A) Price (low to high) Price (high to low)', 'Price (low to high)', 'Price (high to low)', 'Sort items by...', 'PRODUCTS', '© 2019 Sauce Labs. All Rights Reserved.', 'Terms of Service | Privacy Policy', '\\uf099', '\\uf09a', '\\uf0d5', '\\uf0e1']\nE           Last prices observed: [15.99, 7.99, 49.99, 15.99, 9.99, 29.99]\nE           Page-source start:\nE           <?xml version=\"1.0\" encoding=\"UTF-8\"?><AppiumAUT><XCUIElementTypeApplication type=\"XCUIElementTypeApplication\" name=\"Swag Labs Mobile App\" label=\"Swag Labs Mobile App\" enabled=\"true\" visible=\"true\" accessible=\"false\" x=\"0\" y=\"0\" width=\"375\" height=\"812\" index=\"0\" traits=\"\">\nE             <XCUIElementTypeWindow type=\"XCUIElementTypeWindow\" enabled=\"true\" visible=\"true\" accessible=\"false\" x=\"0\" y=\"0\" width=\"375\" height=\"812\" index=\"0\" traits=\"\">\nE               <XCUIElementTypeOther type=\"XCUIElementTypeOther\" enabled=\"true\" visible=\"false\" accessible=\"false\" x=\"0\" y=\"0\" width=\"375\" height=\"812\" index=\"0\" traits=\"\">\nE                 <XCUIElementTypeOther type=\"XCUIElementTypeOther\" name=\"Username Password LOGIN The currently accepted usernames for this application are:\nE           \nE           standard_user\nE           locked_out_user\nE           problem_user And the password for all users is:\nE           \nE           secret_sauce Vertical scroll bar, 2 pages Horizontal scroll bar, 1 page PRODUCTS Test.allTheThings() T-Shirt (Red) $15.99 ADD TO CART Sauce Labs Onesie $7.99 ADD TO CART Sauce Labs Fleece Jacket $49.99 ADD TO CART Sauce Labs Bolt T-Shirt $15.99 ADD TO CART Sauce Labs Bike Light $9.99 ADD TO CART Sauce Labs Backpack $29.99 ADD TO CART Vertical scroll bar, 1 page Horizontal scroll bar, 1 page     © 2019 Sauce Labs. All Rights Reserved. Terms of Service | Privacy Policy Vertical scroll bar, 3 pages Horizontal scroll bar, 1 page ALL ITEMS WEBVIEW ABOUT LOGOUT RESET APP STATE\" label=\"Username Password LOGIN The currently accepted usernames for this application are:\nE           \nE           standard_user\nE           locked_out_user\nE           problem_user And the password for all users is:\nE           \nE           secret_sauce Vertical scroll bar, 2 pages Horizontal scroll bar, 1 page PRODUCTS Test.allTheThings() T-Shirt (Red) $15.99 ADD TO CART Sauce Labs Onesie $7.99 ADD TO CART Sauce Labs Fleece Jacket $49.99 ADD TO CART Sauce Labs Bolt T-Shirt $15.99 ADD TO CART Sauce Labs Bike Light $9.99 ADD TO CART Sauce Labs Backpack $29.99 ADD TO CART Vertical scroll bar, 1 page Horizontal scroll bar, 1 page     © 2019 Sauce Labs. All Rights Reserved. Terms of Service | Privacy Policy Vertical scroll bar, 3 pages Horizontal scroll bar, 1 page ALL ITEMS WEBVIEW ABOUT LOGOUT RESET APP STATE\" enabled=\"true\" visible=\"false\" accessible=\"false\" x=\"0\" y=\"0\" width=\"375\" height=\"812\" index=\"0\" traits=\"\">\nE                   <XCUIElementTypeOther type=\"XCUIElementTypeOther\" name=\"Username Password LOGIN The currently accepted usernames for this application are:\nE           \nE           standard_user\nE           locked_out_user\nE           problem_user And the password for all users is:\nE           \nE           secret_sauce Vertical scroll bar, 2 pages Horizontal scroll bar, 1 page PRODUCTS Test.allTheThings() T-Shirt (Red) $15.99 ADD TO CART Sauce Labs Onesie $7.99 ADD TO CART Sauce Labs Fleece Jacket $49.99 ADD TO CART Sauce Labs Bolt T-Shirt $15.99 ADD TO CART Sauce Labs Bike Light $9.99 ADD TO CART Sauce Labs Backpack $29.99 ADD TO CART Vertical scroll bar, 1 page Horizontal scroll bar, 1 page     © 2019 Sauce Labs. All Rights Reserved. Terms of Service | Privacy Policy Vertical scroll bar, 3 pages H\n\ntests\\test_products_cart_sorting.py:313: Failed"}, "start": 1758027400992, "stop": 1758027710668, "uuid": "f877a82a-a287-4e79-8748-398daefe0be2", "historyId": "9a088125d44c350e3ba79d110eea5bb3", "testCaseId": "f53a28c62ea3db8c900cfbc05db17b3d", "fullName": "tests.test_products_cart_sorting#test_sorting_by_price", "labels": [{"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_products_cart_sorting"}, {"name": "host", "value": "DB-L-174"}, {"name": "thread", "value": "11856-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_products_cart_sorting"}]}